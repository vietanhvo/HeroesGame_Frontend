{"version":3,"sources":["assets\\Script\\Game.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const axios = require(\"axios\");\r\n\r\nconst instance = axios.create({\r\n  withCredentials: true,\r\n  baseURL: \"http://127.0.0.1:8000\",\r\n});\r\n\r\nwindow.hero = 1;\r\nwindow.monster = 0;\r\nwindow.heroSkin = 3;\r\nwindow.heroId = 2;\r\nwindow.level = 1;\r\n\r\nconst { ccclass, property } = cc._decorator;\r\nconst t = cc.tween;\r\nconst testnet = false;\r\nenum SOUND {\r\n  WIN,\r\n  LOSE,\r\n  E1,\r\n  E2,\r\n  E3,\r\n  E4,\r\n  H1,\r\n  H2,\r\n  H3,\r\n}\r\n\r\n@ccclass\r\nexport default class Game extends cc.Component {\r\n  @property(cc.ProgressBar)\r\n  hpHero: cc.ProgressBar = null;\r\n  @property(cc.Animation)\r\n  animHpHero: cc.Animation = null;\r\n  @property(cc.ProgressBar)\r\n  hpMonster: cc.ProgressBar = null;\r\n  @property(cc.Animation)\r\n  animHpMonster: cc.Animation = null;\r\n  @property([sp.Skeleton])\r\n  heroes: sp.Skeleton[] = [];\r\n  @property([sp.Skeleton])\r\n  monsters: sp.Skeleton[] = [];\r\n  @property(sp.Skeleton)\r\n  battleStartAnim: sp.Skeleton;\r\n  @property(cc.Label)\r\n  notification: cc.Label;\r\n  @property\r\n  percentWaitResponse = 10;\r\n  @property\r\n  dameMonster = 0.01;\r\n  @property\r\n  dameHero = 0.01;\r\n  @property(cc.Node)\r\n  win: cc.Node;\r\n  @property(cc.Node)\r\n  lose: cc.Node;\r\n  @property(cc.Node)\r\n  failed: cc.Node;\r\n  @property(cc.Animation)\r\n  bulletMonster: cc.Animation;\r\n  @property(cc.Animation)\r\n  bulletMonster2: cc.Animation;\r\n  @property(cc.Animation)\r\n  bulletMonster3: cc.Animation;\r\n  @property(cc.Animation)\r\n  bulletMonster4: cc.Animation;\r\n  @property(cc.Animation)\r\n  bulletRanger: cc.Animation;\r\n  @property(cc.Node)\r\n  shadowHero: cc.Node;\r\n  @property(cc.Node)\r\n  shadowMonster: cc.Node;\r\n  @property([cc.Node])\r\n  stars: cc.Node[] = [];\r\n\r\n  @property([cc.AudioClip])\r\n  sounds: cc.AudioClip[] = [];\r\n\r\n  currentHero = null;\r\n  currentMonster = null;\r\n  hp = null;\r\n  wait = true;\r\n  @property(cc.JsonAsset)\r\n  contractABI: cc.JsonAsset = null;\r\n  @property([cc.Label])\r\n  winLabel: cc.Label[] = [];\r\n  @property([cc.Label])\r\n  loseLabel: cc.Label[] = [];\r\n  @property(cc.Label)\r\n  failedLabel: cc.Label = null;\r\n  token = 0;\r\n  exp = 1;\r\n  tx = \"\";\r\n  countTx = 0;\r\n  playSound(soundId: number, loop: boolean = false, delay: number = 0) {\r\n    this.scheduleOnce(() => {\r\n      cc.audioEngine.playEffect(this.sounds[soundId], loop);\r\n    }, delay);\r\n  }\r\n  onLoad(): void {\r\n    this.shadowHero.y = -390;\r\n    this.shadowMonster.y = -390;\r\n  }\r\n  updateSkin(skeleton) {\r\n    if (window.heroSkin <= 2) {\r\n      skeleton.setSkin(\"skin1\");\r\n    } else if (window.heroSkin <= 4) {\r\n      skeleton.setSkin(\"skin2\");\r\n    } else {\r\n      skeleton.setSkin(\"skin3\");\r\n    }\r\n  }\r\n  start(): void {\r\n    let params = new URL(window.location.href).searchParams;\r\n\r\n    window.hero = params.get(\"h\");\r\n    window.monster = params.get(\"m\") - 1;\r\n    window.heroId = params.get(\"heroid\");\r\n\r\n    window.heroSkin = params.get(\"s\");\r\n    window.level = params.get(\"l\");\r\n\r\n    this.currentHero = this.heroes[window.hero];\r\n\r\n    this.currentMonster = this.monsters[window.monster];\r\n    this.updateSkin(this.currentHero);\r\n    this.scheduleOnce(this.battle, 1);\r\n    t(this.node)\r\n      .call(() => {\r\n        /*  */\r\n        this.currentHero.setAnimation(0, \"run\", true);\r\n        t(this.currentHero.node)\r\n          .to(2, { x: -400 })\r\n          .call(() => {\r\n            this.currentHero.setAnimation(0, \"idle\", true);\r\n          })\r\n          .start();\r\n        this.currentMonster.setAnimation(0, \"run\", true);\r\n        t(this.currentMonster.node)\r\n          .to(2, { x: 400 })\r\n          .call(() => {\r\n            this.currentMonster.setAnimation(0, \"idle\", true);\r\n          })\r\n          .start();\r\n      })\r\n      .delay(2)\r\n      .call(() => {\r\n        this.hpHero.node.active = true;\r\n        this.hpMonster.node.active = true;\r\n      })\r\n      .delay(1)\r\n      .call(() => {\r\n        this.battleStartAnim.node.active = true;\r\n        this.battleStartAnim.setAnimation(0, \"animation\", true);\r\n        this.scheduleOnce(() => {\r\n          this.battleStartAnim.node.active = false;\r\n        }, 1);\r\n      })\r\n      .delay(3)\r\n      .call(() => {\r\n        this.currentHero.setStartListener((track) => {\r\n          if (track.animation.name == \"atk\") {\r\n            if (window.hero != 0)\r\n              this.scheduleOnce(() => {\r\n                this.blink(this.currentMonster.node);\r\n              }, 0.5);\r\n            else\r\n              this.scheduleOnce(() => {\r\n                this.blink(this.currentMonster.node);\r\n              }, 0.3);\r\n          }\r\n        });\r\n        //Warrior\r\n        if (window.hero == 1) {\r\n          // fix\r\n          this.currentHero.setAnimation(0, \"run\", true);\r\n          t(this.currentHero.node)\r\n            .by(0.5, { x: 450 })\r\n            .call(() => {\r\n              this.heroAttack();\r\n              this.schedule(this.heroAttack, 1);\r\n            })\r\n            .start();\r\n        }\r\n        //Ranger\r\n        else if (window.hero == 0) {\r\n          // fix\r\n          this.heroAttack();\r\n          this.schedule(this.heroAttack, 0.5);\r\n        }\r\n        //Assassin\r\n        else if (window.hero == 2) {\r\n          this.currentHero.setAnimation(0, \"run\", true);\r\n          t(this.currentHero.node)\r\n            .by(0.5, { x: 450 })\r\n            .call(() => {\r\n              this.heroAttack();\r\n              this.schedule(this.heroAttack, 1);\r\n            })\r\n            .start();\r\n        }\r\n        this.currentMonster.setStartListener((track) => {\r\n          if (track.animation.name == \"atk\") {\r\n            if (window.monster == 3) {\r\n              this.scheduleOnce(() => {\r\n                this.blink(this.currentHero.node);\r\n              }, 0.6);\r\n            } else if (window.monster == 2) {\r\n              if (window.hero == 0) {\r\n                this.scheduleOnce(() => {\r\n                  this.blink(this.currentHero.node);\r\n                }, 0.8);\r\n              } else {\r\n                this.scheduleOnce(() => {\r\n                  this.blink(this.currentHero.node);\r\n                }, 0.6);\r\n              }\r\n            } else {\r\n              this.scheduleOnce(() => {\r\n                this.blink(this.currentHero.node);\r\n              }, 0.2);\r\n            }\r\n            if (window.monster == 1) {\r\n              this.bulletMonster.node.active = true;\r\n              if (window.hero == 1 || window.hero == 2)\r\n                // fix\r\n                this.bulletMonster.play(\"monster_bullet_1\");\r\n              else if (window.hero == 0)\r\n                // fix\r\n                this.bulletMonster.play(\"monster_bullet_2\");\r\n            } else if (window.monster == 2) {\r\n              this.scheduleOnce(() => {\r\n                this.bulletMonster3.node.active = true;\r\n                this.bulletMonster3.play(\"monster_bullet_3\");\r\n              }, 0.5);\r\n            } else if (window.monster == 3) {\r\n              this.bulletMonster4.node.active = true;\r\n              this.bulletMonster4.play(\"monster_bullet_4\");\r\n            } else {\r\n              this.bulletMonster2.node.active = true;\r\n              if (window.hero == 1 || window.hero == 2)\r\n                // fix\r\n                this.bulletMonster2.play(\"monster_bullet_1\");\r\n              else if (window.hero == 0)\r\n                // fix\r\n                this.bulletMonster2.play(\"monster_bullet_2\");\r\n            }\r\n          }\r\n        });\r\n        if (window.monster == 1) {\r\n          if (window.hero == 0)\r\n            // fix\r\n            this.schedule(this.monsterAttack, 0.3);\r\n          else this.schedule(this.monsterAttack, 0.5);\r\n        } else if (window.monster == 2) {\r\n          this.monsterAttack();\r\n          this.schedule(this.monsterAttack, 1.5);\r\n        } else if (window.monster == 3) {\r\n          if (window.hero == 0) {\r\n            this.currentMonster.setAnimation(0, \"run\", true);\r\n            t(this.currentMonster.node)\r\n              .by(0.5, { position: cc.v2(-500, 0) })\r\n              .call(() => {\r\n                this.monsterAttack();\r\n                this.schedule(this.monsterAttack, 1.2);\r\n              })\r\n              .start();\r\n          } else {\r\n            this.scheduleOnce(() => {\r\n              this.monsterAttack();\r\n              this.schedule(this.monsterAttack, 1.2);\r\n            }, 0.5);\r\n          }\r\n        } else {\r\n          this.schedule(this.monsterAttack, 1.1);\r\n        }\r\n        this.currentHero.setCompleteListener((track) => {\r\n          if (track.animation.name == \"atk\") {\r\n            if (window.hero == 0) {\r\n              if (window.monster != 3) this.bulletRanger.play(\"ranger_bullet\");\r\n              else this.bulletRanger.play(\"ranger_bullet2\");\r\n            }\r\n            this.hpMonster.progress -= this.dameHero;\r\n            if (this.hpMonster.progress < 0.1 && this.wait) {\r\n              // 1 / 10 = 0.1\r\n              this.hpMonster.progress = 0.1;\r\n            }\r\n\r\n            if (this.hpMonster.progress <= 0.01) {\r\n              this.playSound(SOUND.WIN, false, 0);\r\n              this.unschedule(this.heroAttack);\r\n              this.unschedule(this.monsterAttack);\r\n              this.currentHero.setAnimation(0, \"win\", false);\r\n              // this.currentMonster.setAnimation(0, \"die\", false);\r\n              this.currentMonster.setAnimation(0, \"Die\", false);\r\n              for (var i = 0; i < window.heroSkin; i++) {\r\n                this.stars[i].active = true;\r\n              }\r\n              this.scheduleOnce(() => {\r\n                this.win.active = true;\r\n                if (window.hero == 1) {\r\n                  // fix\r\n                  this.win.getChildByName(\"Warrior\").active = true;\r\n                  this.win.getChildByName(\"Ranger\").active = false;\r\n                  this.win.getChildByName(\"Assassin\").active = false;\r\n                  let sp = this.win\r\n                    .getChildByName(\"Warrior\")\r\n                    .getComponent(\"sp.Skeleton\");\r\n                  this.updateSkin(sp);\r\n                } else if (window.hero == 0) {\r\n                  // fix\r\n                  this.win.getChildByName(\"Warrior\").active = false;\r\n                  this.win.getChildByName(\"Ranger\").active = true;\r\n                  this.win.getChildByName(\"Assassin\").active = false;\r\n                  let sp = this.win\r\n                    .getChildByName(\"Ranger\")\r\n                    .getComponent(\"sp.Skeleton\");\r\n                  this.updateSkin(sp);\r\n                } else if (window.hero == 2) {\r\n                  this.win.getChildByName(\"Warrior\").active = false;\r\n                  this.win.getChildByName(\"Ranger\").active = false;\r\n                  this.win.getChildByName(\"Assassin\").active = true;\r\n                  let sp = this.win\r\n                    .getChildByName(\"Assassin\")\r\n                    .getComponent(\"sp.Skeleton\");\r\n                  this.updateSkin(sp);\r\n                }\r\n              }, 1);\r\n              return;\r\n            }\r\n          }\r\n        });\r\n        this.currentMonster.setCompleteListener((track) => {\r\n          if (track.animation.name == \"atk\") {\r\n            this.hpHero.progress = this.hpHero.progress - this.dameMonster;\r\n            if (this.wait && this.hpHero.progress <= 0.1) {\r\n              this.hpHero.progress = 0.1;\r\n            }\r\n\r\n            if (this.hpHero.progress <= 0.01) {\r\n              this.playSound(SOUND.LOSE, false, 0);\r\n              this.unschedule(this.monsterAttack);\r\n              this.unschedule(this.heroAttack);\r\n              this.currentHero.setAnimation(0, \"lose\", false);\r\n              this.currentMonster.setAnimation(0, \"idle\", false);\r\n              this.scheduleOnce(() => {\r\n                this.lose.active = true;\r\n              }, 1);\r\n              return;\r\n            }\r\n          }\r\n        });\r\n      })\r\n      .start();\r\n  }\r\n\r\n  showFailed(msg) {\r\n    this.failed.active = true;\r\n    this.failedLabel.string = msg;\r\n  }\r\n\r\n  async battle() {\r\n    try {\r\n      const res = await instance.post(\"/hero/battle\", {\r\n        hero_id: parseInt(window.heroId),\r\n        monster_id: window.monster + 1,\r\n      });\r\n      console.log(res.data);\r\n      if (res.data) {\r\n        this.token = 100;\r\n        this.exp = 100;\r\n\r\n        this.winGame();\r\n      } else {\r\n        this.token = 0;\r\n        this.exp = 0;\r\n\r\n        this.loseGame();\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n  update(): void {\r\n    this.shadowHero.x = this.currentHero.node.x;\r\n    this.shadowMonster.x = this.currentMonster.node.x;\r\n  }\r\n\r\n  heroAttack(): void {\r\n    this.currentHero.setAnimation(0, \"atk\", false);\r\n    if (window.hero == 0) {\r\n      this.playSound(SOUND.H1, false, 0);\r\n    } else if (window.hero == 1) {\r\n      this.playSound(SOUND.H2, false, 0);\r\n    } else {\r\n      this.playSound(SOUND.H3, false, 0);\r\n    }\r\n  }\r\n\r\n  monsterAttack(): void {\r\n    // cc.log(\"monster attack\");\r\n    this.currentMonster.setAnimation(0, \"atk\", false);\r\n    if (window.monster == 0) {\r\n      this.playSound(SOUND.E1, false, 0);\r\n    } else if (window.monster == 1) {\r\n      this.playSound(SOUND.E2, false, 0);\r\n    } else if (window.monster == 2) {\r\n      this.playSound(SOUND.E3, false, 0);\r\n    } else {\r\n      this.playSound(SOUND.E4, false, 0);\r\n    }\r\n  }\r\n  blink(node): void {\r\n    node.color = cc.Color.RED;\r\n    t(node)\r\n      .delay(0.1)\r\n      .call(() => {\r\n        node.color = cc.Color.WHITE;\r\n      })\r\n      .start();\r\n  }\r\n\r\n  winGame(): void {\r\n    this.wait = false;\r\n    this.dameHero = 0.5;\r\n    this.dameMonster = 0;\r\n    this.winLabel[0].string = `+${this.exp}`;\r\n    this.winLabel[1].string = `+${this.token}`;\r\n    this.winLabel[2].string = `Level ${window.level}`;\r\n  }\r\n\r\n  loseGame(): void {\r\n    this.wait = false;\r\n    this.dameMonster = 0.5;\r\n    this.dameHero = 0;\r\n    this.loseLabel[0].string = `+${this.exp}`;\r\n    this.loseLabel[1].string = `+${this.token}`;\r\n    this.loseLabel[2].string = `Level ${window.level}`;\r\n  }\r\n}\r\n"]}