{"version":3,"sources":["assets/Script/Game.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const Web3 = require('web3.min');\n\n// window.hero = 1;\n// window.monster = 1;\nconst GAS_PRICE_DEFAULT = '5000000000';\nconst GAS_PRICE_DEFAULT_TESTNET = '10000000000';\nconst BATTLE_CONTRACT = '0x9266D78e544035eF85ecfa15320fc827D9750088'\nconst BATTLE_CONTRACT_TESTNET = '0x2F18bB2436F975176f26c0bE60aDD30BFC3c8E48'//'0x1c6b1CAB672D56db2f967363f86263b049f3cA28' // testnet\nwindow.hero = 1;\nwindow.monster = 0;\nwindow.heroSkin = 3;\nwindow.heroId = 2;\nwindow.level = 1;\n\nconst {ccclass, property} = cc._decorator;\nconst t = cc.tween;\nconst testnet = false;\nenum SOUND {\n    WIN,\n    LOSE,\n    E1,\n    E2,\n    E3,\n    E4,\n    H1,\n    H2,\n    H3\n}\n\n@ccclass\nexport default class Game extends cc.Component {\n    @property(cc.ProgressBar)\n    hpHero: cc.ProgressBar = null;\n    @property(cc.Animation)\n    animHpHero: cc.Animation = null;\n    @property(cc.ProgressBar)\n    hpMonster: cc.ProgressBar = null;\n    @property(cc.Animation)\n    animHpMonster: cc.Animation = null;\n    @property([sp.Skeleton])\n    heroes: sp.Skeleton[] = [];\n    @property([sp.Skeleton])\n    monsters: sp.Skeleton[] = [];\n    @property(sp.Skeleton)\n    battleStartAnim: sp.Skeleton;\n    @property(cc.Label)\n    notification: cc.Label;\n    @property\n    percentWaitResponse = 10;\n    @property\n    dameMonster = 0.01;\n    @property\n    dameHero = 0.01;\n    @property(cc.Node)\n    win: cc.Node;\n    @property(cc.Node)\n    lose: cc.Node;\n    @property(cc.Node)\n    failed: cc.Node;\n    @property(cc.Animation)\n    bulletMonster: cc.Animation;\n    @property(cc.Animation)\n    bulletMonster2: cc.Animation;\n    @property(cc.Animation)\n    bulletMonster3: cc.Animation;\n    @property(cc.Animation)\n    bulletMonster4: cc.Animation;\n    @property(cc.Animation)\n    bulletRanger: cc.Animation;\n    @property(cc.Node)\n    shadowHero: cc.Node;\n    @property(cc.Node)\n    shadowMonster: cc.Node;   \n    @property([cc.Node])\n    stars: cc.Node[] = [];\n\n    @property([cc.AudioClip])\n    sounds: cc.AudioClip[] = [];\n    \n    currentHero = null;\n    currentMonster = null;\n    hp = null;\n    wait = true;\n    @property(cc.JsonAsset)\n    contractABI: cc.JsonAsset = null\n    @property([cc.Label])\n    winLabel: cc.Label[] = []\n    @property([cc.Label])\n    loseLabel: cc.Label[] = []\n    @property(cc.Label)\n    failedLabel: cc.Label = null\n    token = 0\n    exp = 1\n    tx = \"\"\n    countTx = 0\n    playSound(soundId: number, loop: boolean = false, delay: number = 0){\n        this.scheduleOnce(()=>{\n            cc.audioEngine.playEffect(this.sounds[soundId], loop)\n        },delay)\n    }\n    onLoad(): void {\n        this.shadowHero.y = -390;\n        this.shadowMonster.y = -390;\n    }\n    updateSkin(skeleton){\n        if (window.heroSkin <= 2 ){\n            skeleton.setSkin(\"skin1\")\n        } else if (window.heroSkin <= 4 ){\n            skeleton.setSkin(\"skin2\")\n        } else {\n            skeleton.setSkin(\"skin3\")\n        }\n    }\n    start(): void {\n        if(!testnet){\n            let params = (new URL(window.location.href)).searchParams;\n        \n            window.hero = params.get(\"h\")\n            window.monster = params.get(\"m\") - 1\n            window.heroId = params.get(\"heroid\")\n            \n            window.heroSkin = params.get(\"s\")\n            window.level = params.get(\"l\")\n        }\n\n        this.currentHero = this.heroes[window.hero];\n\n        this.currentMonster = this.monsters[window.monster];\n        this.updateSkin(this.currentHero)\n        if (testnet){\n            this.initWeb3Testnet()\n        }else{\n            this.initWeb3();\n        }\n        // if (window.monster == 3 && window.hero == 0)\n        // {\n        //     this.bulletRanger.node.position = cc.v3(-223, -215);\n        // }\n        // else\n        // {\n        //     this.bulletRanger.node.position = cc.v3(-223, -215);\n        // }\n        t(this.node).call(() => {\n                /*  */\n                this.currentHero.setAnimation(0, \"run\", true);\n                t(this.currentHero.node).to(2, {x: -400})\n                    .call(() => {\n                        this.currentHero.setAnimation(0, \"idle\", true);\n                    })\n                    .start();\n                this.currentMonster.setAnimation(0, \"run\", true);\n                t(this.currentMonster.node).to(2, {x: 400})\n                    .call(() => {\n                        this.currentMonster.setAnimation(0, \"idle\", true);\n                    })\n                    .start();\n            })\n            .delay(2)\n            .call(() => {\n                this.hpHero.node.active = true;\n                this.hpMonster.node.active = true;\n            })\n            .delay(1)\n            .call(() => {\n                this.battleStartAnim.node.active = true\n                this.battleStartAnim.setAnimation(0,\"animation\", true)\n                this.scheduleOnce(()=>{\n                    this.battleStartAnim.node.active = false\n                },1)\n\n            })\n            .delay(3)\n            .call(() => {\n                this.currentHero.setStartListener(track => {\n                    if (track.animation.name == \"atk\")\n                    {\n                        if (window.hero != 0)\n                            this.scheduleOnce(() => {\n                                this.blink(this.currentMonster.node);\n                            }, 0.5);\n                        else\n                            this.scheduleOnce(() => {\n                                this.blink(this.currentMonster.node);\n                            }, 0.3);\n                    }\n                })\n                //Warrior\n                if (window.hero == 1) // fix\n                {\n                    this.currentHero.setAnimation(0, \"run\", true);\n                    t(this.currentHero.node).by(0.5, {x: 450})\n                        .call(() => {\n                            this.heroAttack();\n                            this.schedule(this.heroAttack, 1);\n                        }).start();\n                }\n                //Ranger\n                else if (window.hero == 0) // fix\n                {\n                    this.heroAttack();\n                    this.schedule(this.heroAttack, 0.5);\n                    \n                }\n                //Assassin\n                else if (window.hero == 2)\n                {\n                    this.currentHero.setAnimation(0, \"run\", true);\n                    t(this.currentHero.node).by(0.5, {x: 450})\n                        .call(() => {\n                            this.heroAttack();\n                            this.schedule(this.heroAttack, 1);\n                        }).start();\n                }\n                this.currentMonster.setStartListener(track => {\n                    if (track.animation.name == \"atk\")\n                    {\n                        if(window.monster == 3)\n                        {\n                            this.scheduleOnce(() => {\n                                this.blink(this.currentHero.node);\n                            }, 0.6);\n                        }\n                        else if (window.monster == 2)\n                        {\n                            if (window.hero == 0)\n                            {\n                                this.scheduleOnce(() => {\n                                    this.blink(this.currentHero.node);\n                                }, 0.8);\n                            }\n                            else\n                            {\n                                this.scheduleOnce(() => {\n                                    this.blink(this.currentHero.node);\n                                }, 0.6);\n                            }\n                        }\n                        else\n                        {\n                            this.scheduleOnce(() => {\n                                this.blink(this.currentHero.node);\n                            }, 0.2);\n                        }\n                        if (window.monster == 1)\n                        {\n                            this.bulletMonster.node.active = true;\n                            if (window.hero == 1 || window.hero == 2) // fix\n                                this.bulletMonster.play(\"monster_bullet_1\");\n                            else if (window.hero == 0) // fix\n                                this.bulletMonster.play(\"monster_bullet_2\");\n                        }\n                        else if (window.monster == 2)\n                        {\n                            this.scheduleOnce(() => {\n                                this.bulletMonster3.node.active = true;\n                                this.bulletMonster3.play(\"monster_bullet_3\");\n                            }, 0.5);\n                        }\n                        else if (window.monster == 3)\n                        {\n                            this.bulletMonster4.node.active = true;\n                            this.bulletMonster4.play(\"monster_bullet_4\");\n                        }\n                        else\n                        {\n                            this.bulletMonster2.node.active = true;\n                            if (window.hero == 1 || window.hero == 2) // fix\n                                this.bulletMonster2.play(\"monster_bullet_1\");\n                            else if (window.hero == 0) // fix\n                                this.bulletMonster2.play(\"monster_bullet_2\");\n                        }\n                    }\n                })\n                if (window.monster == 1)\n                {\n                    if (window.hero == 0) // fix\n                        this.schedule(this.monsterAttack, 0.3);\n                    else\n                        this.schedule(this.monsterAttack, 0.5);\n                }\n                else if (window.monster == 2)\n                {\n                    this.monsterAttack();\n                    this.schedule(this.monsterAttack, 1.5);\n                }\n                else if (window.monster == 3)\n                {\n                    if (window.hero == 0)\n                    {\n                        this.currentMonster.setAnimation(0, \"run\", true);\n                        t(this.currentMonster.node).by(0.5, {position: cc.v2(-500, 0)})\n                            .call(() => {\n                                this.monsterAttack();\n                                this.schedule(this.monsterAttack, 1.2);\n                            }).start();\n                    }\n                    else\n                    {\n                        this.scheduleOnce(() => {\n                            this.monsterAttack();\n                            this.schedule(this.monsterAttack, 1.2);\n                        }, 0.5);\n                    }\n                }\n                else\n                {\n                    this.schedule(this.monsterAttack, 1.1);\n                }\n                this.currentHero.setCompleteListener(track => {\n                    if (track.animation.name == \"atk\")\n                    {\n                        if (window.hero == 0)\n                        {\n                            if (window.monster != 3)\n                                this.bulletRanger.play(\"ranger_bullet\");\n                            else\n                                this.bulletRanger.play(\"ranger_bullet2\");\n                        }\n                        this.hpMonster.progress -= this.dameHero;\n                        if (this.hpMonster.progress < 0.1 && this.wait) // 1 / 10 = 0.1\n                        {\n                            this.hpMonster.progress = 0.1;\n                        }\n\n                        if (this.hpMonster.progress <= 0.01)\n                        {\n                            this.playSound(SOUND.WIN,false,0)\n                            this.unschedule(this.heroAttack);\n                            this.unschedule(this.monsterAttack);\n                            this.currentHero.setAnimation(0, \"win\", false);\n                            // this.currentMonster.setAnimation(0, \"die\", false);\n                            this.currentMonster.setAnimation(0, \"Die\", false);\n                            for (var i=0; i < window.heroSkin; i ++){\n                                this.stars[i].active = true\n                            }\n                            this.scheduleOnce(() => {\n                                this.win.active = true;\n                                if (window.hero == 1) // fix\n                                {\n                                    this.win.getChildByName(\"Warrior\").active = true;\n                                    this.win.getChildByName(\"Ranger\").active = false;\n                                    this.win.getChildByName(\"Assassin\").active = false;\n                                    let sp = this.win.getChildByName(\"Warrior\").getComponent(\"sp.Skeleton\")\n                                    this.updateSkin(sp)\n                                }\n                                else if (window.hero == 0) // fix\n                                {\n                                    this.win.getChildByName(\"Warrior\").active = false;\n                                    this.win.getChildByName(\"Ranger\").active = true;\n                                    this.win.getChildByName(\"Assassin\").active = false;\n                                    let sp = this.win.getChildByName(\"Ranger\").getComponent(\"sp.Skeleton\")\n                                    this.updateSkin(sp)\n                                }\n                                else if (window.hero == 2)\n                                {\n                                    this.win.getChildByName(\"Warrior\").active = false;\n                                    this.win.getChildByName(\"Ranger\").active = false;\n                                    this.win.getChildByName(\"Assassin\").active = true;\n                                    let sp = this.win.getChildByName(\"Assassin\").getComponent(\"sp.Skeleton\")\n                                    this.updateSkin(sp)\n                                }\n                            }, 1)\n                            return;\n                        }\n                    }\n                });\n                this.currentMonster.setCompleteListener(track => {\n                    if (track.animation.name == \"atk\")\n                    {\n                        this.hpHero.progress = this.hpHero.progress - this.dameMonster\n                        if (this.wait && this.hpHero.progress <= 0.1) {\n                            this.hpHero.progress = 0.1;\n                        } \n\n                        if (this.hpHero.progress <= 0.01)\n                        {\n                            this.playSound(SOUND.LOSE, false, 0)\n                            this.unschedule(this.monsterAttack);\n                            this.unschedule(this.heroAttack);\n                            this.currentHero.setAnimation(0, \"lose\", false);\n                            this.currentMonster.setAnimation(0, \"idle\", false);\n                            this.scheduleOnce(() => {\n                                this.lose.active = true;\n                            }, 1)\n                            return;\n                        }\n                    }\n                });\n            })\n            .start();\n            \n    }\n    initWeb3() {\n        const isWeb3Enabled = () => !!window.parent.web3 \n        if (isWeb3Enabled()) {\n            this.web3 = new Web3();\n            //Request account access for modern dapp browsers\n            if (window.parent.ethereum) {\n                console.log(\"window.ethereum\")\n                this.web3Provider = window.parent.ethereum;\n                this.web3.setProvider(this.web3Provider);\n                    window.parent.ethereum.request({ method: 'eth_requestAccounts' })\n                    .then( result => {\n                        console.log(result)\n                        if (result.length > 0) {\n                            this.address = result[0].toLowerCase();\n                            console.log(\"Address: \", this.address)\n                            this.initContract()\n                        }\n                    })\n                    .catch(error=>{\n                        console.error(error.message)\n                        this.failed.active = true\n                        this.failedLabel.string = error.message\n                    });\n            }\n          //Request account access for legacy dapp browsers\n            else if (window.parent.web3) {\n                console.log(\"window.web3\")\n                this.web3Provider = window.parent.web3.currentProvider;\n                this.web3.setProvider(this.web3Provider);\n        \n                this.initAccount();\n            }\n        } else {\n            console.error('You must enable and login into your Wallet or MetaMask accounts!');\n        }\n    }\n    initWeb3Testnet() {\n        const isWeb3Enabled = () => !!window.web3 \n        if (isWeb3Enabled()) {\n\n          this.web3 = new Web3();\n    \n          //Request account access for modern dapp browsers\n          if (window.ethereum) {\n              console.log(\"window.ethereum\")\n            this.web3Provider = window.ethereum;\n            this.web3Provider.on = null\n            this.web3.eth.handleRevert = true\n            this.web3.setProvider(this.web3Provider);\n            window.ethereum.request({ method: 'eth_requestAccounts' })\n                .then( result => {\n                    if (result.length > 0) {\n                        this.address = result[0].toLowerCase();\n                        console.log(\"Address: \", this.address)\n                        this.initContract()\n                }})\n                .catch(error => {\n                    console.log(error.message)\n                });\n          }\n          //Request account access for legacy dapp browsers\n          else if (window.web3) {\n            console.log(\"window.web3\")\n            this.web3Provider = window.web3.currentProvider;\n            this.web3Provider.on = null\n            this.web3.setProvider(this.web3Provider);\n    \n            this.initAccount();\n          }\n        } else {\n          console.error('You must enable and login into your Wallet or MetaMask accounts!');\n        }\n    }\n    initAccount(){\n        this.web3.eth.getAccounts().then(accounts => {\n            if (accounts.length > 0) {\n                this.address = accounts[0].toLowerCase();\n                console.log(\"Address: \", this.address)\n                this.initContract()\n            } \n            else console.error('You must enable and login into your Wallet or MetaMask accounts!');\n        }).catch(err => {\n            this.showFailed(err.message)\n        });\n    }\n    showFailed(msg){\n        this.failed.active = true\n        this.failedLabel.string = msg\n    }\n    initContract(){\n        this.web3.eth.net.getNetworkType().then(netId => {\n            this.web3.eth.Contract.handleRevert = true\n            this.contract = new this.web3.eth.Contract(\n                this.contractABI.json,\n                testnet ? BATTLE_CONTRACT_TESTNET : BATTLE_CONTRACT\n            );\n            if (window.heroId >=0  && window.monster >= 0){\n                this.contract.methods.battle(window.heroId, window.monster + 1 ).send({\n                    from: this.address,\n                    gas: 250000,\n                    gasPrice: testnet ? GAS_PRICE_DEFAULT_TESTNET : GAS_PRICE_DEFAULT\n                  }, (err, hash)=>{\n                      if (err){\n                        this.showFailed(err.message)\n                      } else {\n                        this.tx = hash\n                        this.scheduleOnce(this.waitForReceipt, 1)\n                      }\n                  })\n            }else{\n                this.showFailed(\"Hero data is not loaded successfully\")\n            }\n          }).catch(err=>{\n                this.showFailed(err.message)\n          })\n    }\n    async getRevertReason(txHash){\n\n        const tx = await this.web3.eth.getTransaction(txHash)\n        var result = await this.web3.eth.call(tx, tx.blockNumber)\n        console.log(\"reS: \" +result)\n        result = result.startsWith('0x') ? result : `0x${result}`\n        if (result && result.substr(138)) {\n            const reason = this.web3.utils.toAscii(result.substr(138))\n            console.log('Revert reason:', reason)\n            return reason\n        } else {      \n            console.log('Cannot get reason - No return value')\n            return \"Cannot get reason - No return value\"\n        }\n      \n    }\n    waitForReceipt() {\n        this.web3.eth.getTransactionReceipt(this.tx, (err, txr) => {\n            if (err){\n                this.showFailed(err.message)\n            } else {\n                if (txr==null){\n                    this.countTx ++\n                    if (this.countTx < 100){\n                        this.scheduleOnce(this.waitForReceipt,1)\n                    }\n                } else {\n                    console.log(txr)\n                    if (!txr.status){\n                        console.log(\"false\")\n                        this.getRevertReason(this.tx).then(a=>{\n                            console.log(\"a:\"+a)\n                            this.showFailed(\"\")\n                        }).catch(err=>{\n                            this.showFailed(\"Failed\"])\n                            console.log(\"err:\")\n\n                        })\n                    } else {\n                        const eventJsonInterface = _.find(\n                        this.contract._jsonInterface,\n                            o => o.name === 'BattleResult' && o.type === 'event',\n                        )\n                          \n                        const log = _.find(\n                            txr.logs,\n                            l => l.topics.includes(eventJsonInterface.signature)\n                        )\n                          \n                        var l = this.web3.eth.abi.decodeLog(eventJsonInterface.inputs, log.data, log.topics.slice(1))\n                        this.token = l.tokenReward\n                        this.exp = l.expReward\n    \n                        if (!!l.result) {\n                            this.winGame()\n                        } else {\n                            this.loseGame()\n                        }\n                        \n                    }\n                        \n                }\n            }         \n\n        })\n    }\n    update(): void {\n        this.shadowHero.x = this.currentHero.node.x;\n        this.shadowMonster.x = this.currentMonster.node.x;\n    }\n\n    heroAttack(): void {\n        this.currentHero.setAnimation(0, \"atk\", false);\n        if (window.hero == 0){\n            this.playSound(SOUND.H1, false, 0)\n        } else if (window.hero == 1) {\n            this.playSound(SOUND.H2, false, 0)\n        } else {\n            this.playSound(SOUND.H3, false, 0)\n        }\n    }\n\n    monsterAttack(): void {\n        // cc.log(\"monster attack\");\n        this.currentMonster.setAnimation(0, \"atk\", false);\n        if (window.monster == 0){\n            this.playSound(SOUND.E1, false, 0)\n        } else if (window.monster == 1) {\n            this.playSound(SOUND.E2, false, 0)\n        } else if (window.monster == 2) {\n            this.playSound(SOUND.E3, false, 0)\n        } else {\n            this.playSound(SOUND.E4, false, 0)\n        }\n    }\n    blink(node): void {\n        node.color = cc.Color.RED;\n        t(node).delay(0.1).call(() => {\n            node.color = cc.Color.WHITE;\n        }).start();\n    }\n\n    winGame(): void {\n        this.wait = false;\n        this.dameHero = 0.5;\n        this.dameMonster = 0;\n        this.winLabel[0].string = `+${this.exp}`\n        this.winLabel[1].string = `+${this.token}`\n        this.winLabel[2].string = `Level ${window.level}`\n    }\n\n    loseGame(): void {\n        this.wait = false;\n        this.dameMonster = 0.5;\n        this.dameHero = 0;\n        this.loseLabel[0].string = `+${this.exp}`\n        this.loseLabel[1].string = `+${this.token}`\n        this.loseLabel[2].string = `Level ${window.level}`\n    }\n}\n"]}